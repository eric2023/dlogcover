<!-- Generated by SpecStory -->

# åˆ†æjsonå‚æ•°é…ç½®æ–‡ä»¶çš„è¯»å–é€»è¾‘ (2025-07-10 00:56Z)

_**User**_

è¿›å…¥ç ”ç©¶æ¨¡å¼ï¼Œåˆ†æjsonå‚æ•°é…ç½®æ–‡ä»¶çš„è¯»å–é€»è¾‘

---

_**Assistant**_

[MODE: RESEARCH]

æˆ‘éœ€è¦åˆ†æé¡¹ç›®ä¸­JSONå‚æ•°é…ç½®æ–‡ä»¶çš„è¯»å–é€»è¾‘ã€‚è®©æˆ‘å…ˆè¯»å–Memory Bankæ–‡ä»¶æ¥äº†è§£é¡¹ç›®èƒŒæ™¯ï¼Œç„¶åæ·±å…¥ç ”ç©¶é…ç½®æ–‡ä»¶çš„è¯»å–æœºåˆ¶ã€‚

---

Read file: memory-bank/projectbrief.md

---

Read file: memory-bank/techContext.md

---

Read file: memory-bank/systemPatterns.md

---

ç°åœ¨è®©æˆ‘æ·±å…¥ç ”ç©¶JSONé…ç½®æ–‡ä»¶çš„è¯»å–é€»è¾‘ã€‚åŸºäºMemory Bankçš„ä¿¡æ¯ï¼Œæˆ‘äº†è§£åˆ°è¿™æ˜¯ä¸€ä¸ªåŸºäºClang/LLVMçš„C++æ—¥å¿—è¦†ç›–ç‡åˆ†æå·¥å…·ï¼Œä½¿ç”¨nlohmann/jsonåº“è¿›è¡Œé…ç½®ç®¡ç†ã€‚è®©æˆ‘æŸ¥çœ‹ç›¸å…³çš„é…ç½®æ–‡ä»¶å’Œé…ç½®ç®¡ç†ä»£ç ã€‚

---

<details>
            <summary>Searched codebase "JSONé…ç½®æ–‡ä»¶è¯»å–é€»è¾‘å’Œé…ç½®ç®¡ç†" â€¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/config/config_manager.cpp` | L1-71 |
| `src/config/config_manager.cpp` | L294-333 |
| `src/main.cpp` | L93-144 |
| `src/cli/config_validator.cpp` | L255-292 |
| `.cursor/rules/16-configuration-management.mdc` | L339-389 |
| `src/cli/config_validator.cpp` | L93-121 |
| `include/dlogcover/config/config_manager.h` | L1-79 |
| `docs/è¯¦ç»†è®¾è®¡æ–‡æ¡£.md` | L521-599 |
| `src/cli/options.cpp` | L211-263 |
| `src/config/config_manager.cpp` | L587-638 |
| `docs/è¯¦ç»†è®¾è®¡æ–‡æ¡£.md` | L678-768 |
| `include/dlogcover/config/config_manager.h` | L79-129 |
| `src/config/config_manager.cpp` | L362-398 |
| `src/config/compile_commands_manager.cpp` | L71-127 |
| `.cursor/rules/16-configuration-management.mdc` | L573-631 |
| `src/cli/config_validator.cpp` | L323-344 |
| `src/config/config_manager.cpp` | L216-245 |
| `src/main.cpp` | L355-394 |
| `src/cli/command_line_parser.cpp` | L282-322 |
| `src/config/config_manager.cpp` | L505-531 |
| `src/config/config_manager.cpp` | L181-216 |
| `.cursor/rules/16-configuration-management.mdc` | L191-245 |
| `src/cli/config_validator.cpp` | L344-394 |
| `docs/é…ç½®æŒ‡å—.md` | L1-64 |
| `docs/æ¦‚è¦è®¾è®¡æ–‡æ¡£.md` | L153-223 |

</details>

---

<details>
            <summary>Searched codebase "config" â€¢ **10** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

Read file: dlogcover.json

---

ç°åœ¨è®©æˆ‘æ·±å…¥ç ”ç©¶é…ç½®æ–‡ä»¶çš„æ ¸å¿ƒç»“æ„å®šä¹‰å’Œè§£æé€»è¾‘ï¼š

---

Read file: include/dlogcover/config/config.h

---

Read file: src/config/config_manager.cpp

---

Read file: include/dlogcover/cli/config_constants.h

---

ç»§ç»­æ·±å…¥ç ”ç©¶é…ç½®æ–‡ä»¶è§£æé€»è¾‘çš„å…¶ä»–éƒ¨åˆ†ï¼š

---

Read file: src/config/config_manager.cpp

---

<details>
            <summary>Searched codebase "JSONé…ç½®æ–‡ä»¶é”™è¯¯å¤„ç†å’ŒéªŒè¯é€»è¾‘" â€¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/config/config_manager.cpp` | L587-638 |
| `src/config/config_manager.cpp` | L1-71 |
| `src/config/config_manager.cpp` | L294-333 |
| `src/config/compile_commands_manager.cpp` | L71-127 |
| `src/config/config_manager.cpp` | L216-245 |
| `src/config/compile_commands_manager.cpp` | L127-189 |
| `src/config/config_manager.cpp` | L362-398 |
| `src/config/config_manager.cpp` | L71-111 |
| `src/config/config_manager.cpp` | L181-216 |
| `src/config/config_manager.cpp` | L505-531 |
| `src/config/config_manager.cpp` | L638-696 |
| `src/config/config_manager.cpp` | L449-478 |
| `src/config/config_manager.cpp` | L478-505 |
| `src/config/config_manager.cpp` | L333-362 |
| `src/config/config_manager.cpp` | L245-294 |
| `src/config/config_manager.cpp` | L398-426 |
| `src/config/compile_commands_manager.cpp` | L31-71 |
| `src/config/config_manager.cpp` | L111-149 |
| `src/config/compile_commands_manager.cpp` | L261-304 |
| `src/config/compile_commands_manager.cpp` | L304-352 |
| `src/config/config_manager.cpp` | L426-449 |
| `src/config/config_manager.cpp` | L149-181 |
| `src/config/config_manager.cpp` | L563-587 |
| `src/config/config_manager.cpp` | L531-563 |
| `src/config/compile_commands_manager.cpp` | L189-238 |

</details>

---

<details>
            <summary>Searched codebase "é…ç½®æ–‡ä»¶åŠ è½½æµç¨‹å’Œåˆå§‹åŒ–" â€¢ **13** results</summary>
        
| File | Lines |
|------|-------|
| `src/main.cpp` | L93-144 |
| `src/main.cpp` | L355-394 |
| `src/main.cpp` | L394-424 |
| `src/main.cpp` | L321-355 |
| `src/main.cpp` | L61-93 |
| `src/main.cpp` | L1-61 |
| `src/main.cpp` | L144-186 |
| `src/main.cpp` | L424-444 |
| `src/main.cpp` | L186-233 |
| `src/main.cpp` | L444-483 |
| `src/main.cpp` | L483-509 |
| `src/main.cpp` | L277-321 |
| `src/main.cpp` | L233-277 |

</details>

---

åŸºäºæˆ‘çš„ç ”ç©¶ï¼Œæˆ‘ç°åœ¨å¯¹DLogCoveré¡¹ç›®çš„JSONå‚æ•°é…ç½®æ–‡ä»¶è¯»å–é€»è¾‘æœ‰äº†å…¨é¢çš„ç†è§£ã€‚è®©æˆ‘æ€»ç»“åˆ†æç»“æœï¼š

## JSONå‚æ•°é…ç½®æ–‡ä»¶è¯»å–é€»è¾‘åˆ†æ

### ç³»ç»Ÿæ¶æ„æ¦‚è¿°

DLogCoveræ˜¯ä¸€ä¸ªåŸºäºClang/LLVMçš„C++æ—¥å¿—è¦†ç›–ç‡åˆ†æå·¥å…·ï¼Œä½¿ç”¨nlohmann/jsonåº“è¿›è¡ŒJSONé…ç½®æ–‡ä»¶çš„è§£æå’Œç®¡ç†ã€‚é…ç½®ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚è®¾è®¡ï¼Œæ”¯æŒå¤šç§é…ç½®æ¥æºçš„åˆå¹¶ã€‚

### æ ¸å¿ƒç»„ä»¶æ¶æ„

#### 1. é…ç½®ç»“æ„ä½“ç³»ç»Ÿ (`config.h`)
é¡¹ç›®å®šä¹‰äº†å®Œæ•´çš„é…ç½®ç»“æ„ä½“å±‚æ¬¡ï¼š
- **ProjectConfig**: é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€ç›®å½•ã€æ„å»ºç›®å½•ï¼‰
- **ScanConfig**: æ‰«æé…ç½®ï¼ˆç›®å½•ã€æ–‡ä»¶æ‰©å±•åã€æ’é™¤æ¨¡å¼ï¼‰
- **CompileCommandsConfig**: ç¼–è¯‘å‘½ä»¤é…ç½®
- **OutputConfig**: è¾“å‡ºé…ç½®ï¼ˆæŠ¥å‘Šæ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ã€æ—¥å¿—çº§åˆ«ï¼‰
- **LogFunctionsConfig**: æ—¥å¿—å‡½æ•°é…ç½®ï¼ˆQtã€è‡ªå®šä¹‰å‡½æ•°ï¼‰
- **AnalysisConfig**: åˆ†æé…ç½®ï¼ˆæ¨¡å¼ã€è¦†ç›–ç‡ç±»å‹ï¼‰
- **PerformanceConfig**: æ€§èƒ½é…ç½®ï¼ˆå¹¶è¡Œã€ç¼“å­˜ã€I/Oä¼˜åŒ–ï¼‰
- **GoConfig**: Goè¯­è¨€é…ç½®ï¼ˆæ”¯æŒå¤šç§Goæ—¥å¿—åº“ï¼‰

#### 2. é…ç½®ç®¡ç†å™¨ (`ConfigManager`)
è´Ÿè´£é…ç½®çš„åŠ è½½ã€è§£æã€éªŒè¯å’Œåˆå¹¶ï¼š

**æ ¸å¿ƒæ–¹æ³•**ï¼š
- `loadConfig()`: åŠ è½½JSONé…ç½®æ–‡ä»¶
- `parseConfigFile()`: è§£æJSONå†…å®¹åˆ°ç»“æ„ä½“
- `validateConfig()`: éªŒè¯é…ç½®æœ‰æ•ˆæ€§
- `mergeWithCommandLineOptions()`: åˆå¹¶å‘½ä»¤è¡Œå‚æ•°
- `createDefaultConfig()`: åˆ›å»ºé»˜è®¤é…ç½®

### JSONé…ç½®æ–‡ä»¶è§£ææµç¨‹

#### 1. é…ç½®æ–‡ä»¶æŸ¥æ‰¾ä¼˜å…ˆçº§
```cpp
// ä¸»ç¨‹åºä¸­çš„é…ç½®åŠ è½½é€»è¾‘
bool configLoaded = false;
if (!options.configPath.empty()) {
    configLoaded = configManager.loadConfig(options.configPath);  // 1. å‘½ä»¤è¡ŒæŒ‡å®š
} else {
    if (std::filesystem::exists("dlogcover.json")) {
        configLoaded = configManager.loadConfig("dlogcover.json");  // 2. å½“å‰ç›®å½•
    }
}
```

#### 2. JSONè§£æè¿‡ç¨‹
é…ç½®æ–‡ä»¶è§£æé‡‡ç”¨**å®‰å…¨çš„ç±»å‹æ£€æŸ¥**æœºåˆ¶ï¼š

```cpp
// é¡¹ç›®é…ç½®è§£æç¤ºä¾‹
if (json_config.find("project") != json_config.end()) {
    const auto& project = json_config["project"];
    if (project.find("name") != project.end() && project["name"].is_string()) {
        config_.project.name = project["name"].get<std::string>();
    }
    if (project.find("directory") != project.end() && project["directory"].is_string()) {
        config_.project.directory = project["directory"].get<std::string>();
    }
}
```

**å…³é”®ç‰¹ç‚¹**ï¼š
- ä½¿ç”¨`find()`æ£€æŸ¥å­—æ®µå­˜åœ¨æ€§
- ä½¿ç”¨`is_string()`ã€`is_boolean()`ç­‰è¿›è¡Œç±»å‹éªŒè¯
- ä½¿ç”¨`get<Type>()`è¿›è¡Œå®‰å…¨ç±»å‹è½¬æ¢
- å¯¹æ•°ç»„ç±»å‹è¿›è¡Œé€å…ƒç´ éªŒè¯

#### 3. å¤æ‚é…ç½®è§£æ
å¯¹äºåµŒå¥—ç»“æ„ï¼Œå¦‚Goè¯­è¨€é…ç½®ï¼š

```cpp
// Goè¯­è¨€é…ç½®è§£æ
if (json_config.find("go") != json_config.end()) {
    const auto& go = json_config["go"];
    
    // æ ‡å‡†åº“logé…ç½®
    if (go.find("standard_log") != go.end()) {
        const auto& std_log = go["standard_log"];
        if (std_log.find("enabled") != std_log.end() && std_log["enabled"].is_boolean()) {
            config_.go.standard_log.enabled = std_log["enabled"].get<bool>();
        }
        if (std_log.find("functions") != std_log.end() && std_log["functions"].is_array()) {
            config_.go.standard_log.functions.clear();
            for (const auto& func : std_log["functions"]) {
                if (func.is_string()) {
                    config_.go.standard_log.functions.push_back(func.get<std::string>());
                }
            }
        }
    }
}
```

### é”™è¯¯å¤„ç†æœºåˆ¶

#### 1. å¼‚å¸¸æ•è·
```cpp
try {
    std::ifstream file(config_path);
    nlohmann::json json_config;
    file >> json_config;
    // ... è§£æé€»è¾‘
    return true;
} catch (const std::exception& e) {
    setError("è§£æé…ç½®æ–‡ä»¶å¤±è´¥: " + std::string(e.what()));
    return false;
}
```

#### 2. éªŒè¯æœºåˆ¶
- **æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥**: ä½¿ç”¨`std::filesystem::exists()`
- **JSONæ ¼å¼éªŒè¯**: é€šè¿‡nlohmann/jsonçš„å¼‚å¸¸æœºåˆ¶
- **é…ç½®å®Œæ•´æ€§éªŒè¯**: `validateConfig()`æ–¹æ³•è¿›è¡Œä¸šåŠ¡é€»è¾‘éªŒè¯
- **è·¯å¾„æœ‰æ•ˆæ€§éªŒè¯**: æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ã€æ–‡ä»¶æ‰©å±•åæ ¼å¼ç­‰

### é…ç½®åˆå¹¶ç­–ç•¥

#### å¤šå±‚é…ç½®åˆå¹¶
```
å†…ç½®é»˜è®¤å€¼ < é…ç½®æ–‡ä»¶ < å‘½ä»¤è¡Œå‚æ•°
```

#### åŒå‘å‚æ•°åˆå¹¶
æ”¯æŒå‘½ä»¤è¡Œå‚æ•°å’Œé…ç½®æ–‡ä»¶çš„åŒå‘åˆå¹¶ï¼š
```cpp
// å¦‚æœå‘½ä»¤è¡ŒæŒ‡å®šäº†è¾“å‡ºæ–‡ä»¶ï¼Œä½¿ç”¨å‘½ä»¤è¡Œå€¼
if (!options.output_file.empty()) {
    config_.output.report_file = options.output_file;
} else if (!config_.output.report_file.empty()) {
    // å‘½ä»¤è¡ŒæœªæŒ‡å®šï¼Œä½†é…ç½®æ–‡ä»¶æœ‰å€¼ï¼Œå›å¡«åˆ°å‘½ä»¤è¡Œé€‰é¡¹
    options.output_file = config_.output.report_file;
}
```

### é…ç½®æ–‡ä»¶ç¤ºä¾‹ç»“æ„

æ ¹æ®`dlogcover.json`ï¼Œå®Œæ•´çš„é…ç½®æ–‡ä»¶æ”¯æŒä»¥ä¸‹ç»“æ„ï¼š

```json
{
    "project": {
        "name": "dlog-project",
        "directory": ".",
        "build_directory": "./build"
    },
    "scan": {
        "directories": ["."],
        "file_extensions": [".h", ".cpp", ".go"],
        "exclude_patterns": ["*build*", "*/build/*"]
    },
    "compile_commands": {
        "path": "./build/compile_commands.json",
        "auto_generate": true,
        "cmake_args": ["-DCMAKE_EXPORT_COMPILE_COMMANDS=ON"]
    },
    "analysis": {
        "mode": "go_only",
        "auto_detection": {
            "enabled": true,
            "sample_size": 10,
            "cpp_threshold": 0.6,
            "go_threshold": 0.3
        }
    },
    "log_functions": {
        "qt": {
            "enabled": true,
            "functions": ["qDebug", "qInfo", "qWarning", "qCritical", "qFatal"]
        },
        "custom": {
            "enabled": true,
            "functions": {
                "debug": ["LOG_DEBUG", "LOG_DEBUG_FMT"],
                "info": ["LOG_INFO", "LOG_INFO_FMT"]
            }
        }
    },
    "go": {
        "standard_log": {
            "enabled": true,
            "functions": ["Print", "Printf", "Println"]
        },
        "logrus": {
            "enabled": true,
            "functions": ["Debug", "Info", "Warn", "Error"]
        }
    },
    "performance": {
        "enable_parallel_analysis": true,
        "max_threads": 0,
        "enable_ast_cache": true
    }
}
```

### æŠ€æœ¯ç‰¹ç‚¹æ€»ç»“

1. **ç±»å‹å®‰å…¨**: ä½¿ç”¨ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
2. **å‘åå…¼å®¹**: æ”¯æŒå­—æ®µç¼ºå¤±æ—¶ä½¿ç”¨é»˜è®¤å€¼
3. **çµæ´»é…ç½®**: æ”¯æŒå¤šç§é…ç½®æ¥æºå’Œåˆå¹¶ç­–ç•¥
4. **é”™è¯¯æ¢å¤**: é…ç½®è§£æå¤±è´¥æ—¶èƒ½å¤Ÿå›é€€åˆ°é»˜è®¤é…ç½®
5. **å¤šè¯­è¨€æ”¯æŒ**: åŒæ—¶æ”¯æŒC++å’ŒGoè¯­è¨€çš„é…ç½®é€‰é¡¹
6. **æ€§èƒ½ä¼˜åŒ–**: æ”¯æŒå¹¶è¡Œåˆ†æã€ç¼“å­˜ç­‰æ€§èƒ½é…ç½®

è¿™ä¸ªé…ç½®ç³»ç»Ÿä½“ç°äº†ç°ä»£C++é¡¹ç›®ä¸­é…ç½®ç®¡ç†çš„æœ€ä½³å®è·µï¼Œé€šè¿‡ç»“æ„åŒ–çš„è®¾è®¡å’Œä¸¥æ ¼çš„é”™è¯¯å¤„ç†ï¼Œç¡®ä¿äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

---

_**User**_

@/debian åˆ†ædebianç›¸å…³é…ç½®ï¼Œå¸Œæœ›å°†ç¼–è¯‘ç”Ÿæˆçš„debåŒ…æ”¾åˆ°buildç›®å½•

---

_**Assistant**_

[MODE: RESEARCH]

æˆ‘éœ€è¦åˆ†ædebianç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œäº†è§£å½“å‰çš„DebianåŒ…æ„å»ºè®¾ç½®ï¼Œå¹¶ç ”ç©¶å¦‚ä½•å°†ç”Ÿæˆçš„debåŒ…æ”¾åˆ°buildç›®å½•ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹debianç›®å½•ä¸‹çš„å…³é”®é…ç½®æ–‡ä»¶ã€‚

---

Read file: debian/rules

---

Read file: debian/control

---

Read file: debian/install

---

Read file: debian/changelog

---

ç°åœ¨è®©æˆ‘æŸ¥çœ‹å…¶ä»–ç›¸å…³æ–‡ä»¶ï¼Œå¹¶äº†è§£å½“å‰çš„æ„å»ºè„šæœ¬ï¼š

---

Read file: build.sh

---

<details>
            <summary>Listed directory debian/source â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `format` |

</details>

---

Read file: debian/source/format

---

ç»§ç»­æŸ¥çœ‹æ„å»ºè„šæœ¬çš„å…¶ä»–éƒ¨åˆ†ï¼Œç‰¹åˆ«æ˜¯å…³äºdebianåŒ…æ„å»ºçš„éƒ¨åˆ†ï¼š

---

Read file: build.sh

---

<details>
            <summary>Searched codebase "debianåŒ…æ„å»ºå’Œdebæ–‡ä»¶ç”Ÿæˆ" â€¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `debian/rules` | L1-35 |
| `.cursor/rules/17-build-system.mdc` | L545-607 |
| `README.md` | L235-326 |
| `README.md` | L326-366 |
| `debian/control` | L1-22 |
| `.cursor/rules/17-build-system.mdc` | L607-675 |
| `CMakeLists.txt` | L1-44 |
| `README.md` | L366-420 |
| `.gitignore` | L1-57 |
| `.cursor/rules/17-build-system.mdc` | L738-810 |
| `debian/install` | L1-4 |
| `docs/è¯¦ç»†è®¾è®¡æ–‡æ¡£.md` | L3448-3537 |
| `debian/source/format` | L1-1 |
| `CMakeLists.txt` | L292-333 |
| `debian/copyright` | L1-19 |
| `build.sh` | L216-269 |
| `.cursor/rules/17-build-system.mdc` | L61-138 |
| `debian/dlogcover.substvars` | L1-4 |
| `memory-bank/techContext.md` | L626-716 |
| `build.sh` | L132-216 |
| `.cursor/rules/17-build-system.mdc` | L810-903 |
| `.cursor/rules/17-build-system.mdc` | L903-979 |
| `build.sh` | L1-44 |
| `debian/changelog` | L1-5 |
| `build.sh` | L269-315 |

</details>

---

åŸºäºæˆ‘å¯¹debiané…ç½®çš„æ·±å…¥åˆ†æï¼Œæˆ‘å‘ç°å½“å‰çš„debianåŒ…æ„å»ºé…ç½®å°†debåŒ…ç”Ÿæˆåœ¨é¡¹ç›®çš„ä¸Šçº§ç›®å½•ã€‚æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œæˆ‘éœ€è¦åˆ†æå¦‚ä½•ä¿®æ”¹é…ç½®ä»¥å°†debåŒ…æ”¾åˆ°buildç›®å½•ä¸­ã€‚

è®©æˆ‘æŸ¥çœ‹ç›¸å…³çš„Memory Bankè®°å½•ï¼Œäº†è§£æ„å»ºç³»ç»Ÿçš„é…ç½®ï¼š

---

<details>
            <summary>Searched codebase "dpkg-buildpackageå’ŒdebåŒ…è¾“å‡ºç›®å½•é…ç½®" â€¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `debian/rules` | L1-35 |
| `.cursor/rules/17-build-system.mdc` | L545-607 |
| `README.md` | L366-420 |
| `CMakeLists.txt` | L1-44 |
| `README.md` | L326-366 |
| `README.md` | L235-326 |
| `.cursor/rules/17-build-system.mdc` | L61-138 |
| `build.sh` | L132-216 |
| `.cursor/rules/17-build-system.mdc` | L738-810 |
| `.cursor/rules/17-build-system.mdc` | L607-675 |
| `.gitignore` | L1-57 |
| `CMakeLists.txt` | L292-333 |
| `build.sh` | L216-269 |
| `debian/install` | L1-4 |
| `.cursor/rules/17-build-system.mdc` | L810-903 |
| `src/config/config_manager.cpp` | L245-294 |
| `debian/control` | L1-22 |
| `build.sh` | L315-376 |
| `src/main.cpp` | L147-189 |
| `src/cli/command_line_parser.cpp` | L336-363 |
| `docs/è¯¦ç»†è®¾è®¡æ–‡æ¡£.md` | L3448-3537 |
| `build.sh` | L1-44 |
| `memory-bank/techContext.md` | L539-626 |
| `memory-bank/techContext.md` | L626-716 |
| `build.sh` | L73-132 |

</details>

---

## Debiané…ç½®åˆ†æç»“æœ

åŸºäºæˆ‘å¯¹debianç›®å½•ç›¸å…³é…ç½®çš„æ·±å…¥åˆ†æï¼Œä»¥ä¸‹æ˜¯å½“å‰çš„DebianåŒ…æ„å»ºé…ç½®å’Œå°†debåŒ…è¾“å‡ºåˆ°buildç›®å½•çš„è§£å†³æ–¹æ¡ˆï¼š

### å½“å‰DebianåŒ…æ„å»ºé…ç½®æ¦‚è¿°

#### 1. æ ¸å¿ƒé…ç½®æ–‡ä»¶åˆ†æ

**debian/rulesæ–‡ä»¶**:
- ä½¿ç”¨debhelperæ„å»ºç³»ç»Ÿ
- æ˜ç¡®æŒ‡å®šæ„å»ºç›®å½•ä¸º`build`
- åŒ…å«Goåˆ†æå™¨å’ŒC++é¡¹ç›®çš„æ„å»ºæµç¨‹
- å½“å‰é…ç½®ä½¿ç”¨`--builddirectory=build`å‚æ•°

**debian/controlæ–‡ä»¶**:
- åŒ…åï¼š`dlogcover`
- ç‰ˆæœ¬ï¼š`0.1.0`
- æ¶æ„ï¼š`any`
- æ„å»ºä¾èµ–ï¼šåŒ…å«cmakeã€g++ã€golang-goã€libclang-devç­‰
- è¿è¡Œæ—¶ä¾èµ–ï¼šé€šè¿‡`${shlibs:Depends}`è‡ªåŠ¨æ£€æµ‹

**debian/installæ–‡ä»¶**:
- æŒ‡å®šå®‰è£…æ–‡ä»¶çš„æ¥æºå’Œç›®æ ‡è·¯å¾„
- ä»`build/bin/`ç›®å½•å®‰è£…å¯æ‰§è¡Œæ–‡ä»¶
- å®‰è£…æ–‡æ¡£å’Œé…ç½®æ–‡ä»¶

#### 2. å½“å‰æ„å»ºæµç¨‹

æ ¹æ®Memory Bankè®°å½•ï¼Œå½“å‰çš„æ„å»ºæµç¨‹å¦‚ä¸‹ï¼š

1. **æ ‡å‡†debianåŒ…æ„å»º**ï¼š
   ```bash
   dpkg-buildpackage -us -uc -b
   ```
   - è¿™ä¼šå°†debåŒ…ç”Ÿæˆåœ¨é¡¹ç›®çš„**ä¸Šçº§ç›®å½•**ï¼ˆ`../`ï¼‰

2. **build.shè„šæœ¬æ„å»º**ï¼š
   - æ”¯æŒç¼–è¯‘Goåˆ†æå™¨åˆ°`build/bin/`ç›®å½•
   - æ”¯æŒC++é¡¹ç›®æ„å»ºåˆ°`build/`ç›®å½•
   - ä½†ä¸ç›´æ¥æ”¯æŒdebåŒ…æ„å»º

#### 3. é—®é¢˜åˆ†æ

**å½“å‰é—®é¢˜**ï¼š
- `dpkg-buildpackage`é»˜è®¤å°†debåŒ…è¾“å‡ºåˆ°ä¸Šçº§ç›®å½•
- æ²¡æœ‰ç›´æ¥çš„æ–¹å¼å°†debåŒ…é‡å®šå‘åˆ°buildç›®å½•
- build.shè„šæœ¬æ²¡æœ‰é›†æˆdebåŒ…æ„å»ºåŠŸèƒ½

### è§£å†³æ–¹æ¡ˆï¼šå°†debåŒ…è¾“å‡ºåˆ°buildç›®å½•

#### æ–¹æ¡ˆ1ï¼šä¿®æ”¹build.shè„šæœ¬æ·»åŠ debåŒ…æ„å»ºåŠŸèƒ½

åœ¨build.shè„šæœ¬ä¸­æ·»åŠ debåŒ…æ„å»ºé€‰é¡¹ï¼Œå¹¶å°†ç”Ÿæˆçš„åŒ…ç§»åŠ¨åˆ°buildç›®å½•ï¼š

```bash
# åœ¨build.shä¸­æ·»åŠ æ–°çš„é€‰é¡¹
-p|--package)
    BUILD_DEB_PACKAGE=1
    ;;
```

ç„¶åæ·»åŠ debåŒ…æ„å»ºé€»è¾‘ï¼š

```bash
# æ„å»ºdebåŒ…
if [ $BUILD_DEB_PACKAGE -eq 1 ]; then
    echo "æ„å»ºDEBåŒ…..."
    cd ..
    # æ„å»ºdebåŒ…
    dpkg-buildpackage -us -uc -b
    # å°†debåŒ…ç§»åŠ¨åˆ°buildç›®å½•
    mkdir -p build/packages
    mv dlogcover_*.deb build/packages/ 2>/dev/null || true
    mv dlogcover_*.ddeb build/packages/ 2>/dev/null || true
    mv dlogcover_*.buildinfo build/packages/ 2>/dev/null || true
    mv dlogcover_*.changes build/packages/ 2>/dev/null || true
    cd build
    echo "âœ… DEBåŒ…æ„å»ºå®Œæˆï¼Œä½äº: build/packages/"
fi
```

#### æ–¹æ¡ˆ2ï¼šåˆ›å»ºä¸“é—¨çš„åŒ…æ„å»ºè„šæœ¬

åˆ›å»ºä¸€ä¸ªæ–°çš„è„šæœ¬`build-package.sh`ï¼š

```bash
#!/bin/bash
# DEBåŒ…æ„å»ºè„šæœ¬

set -e

# ç¡®ä¿æ„å»ºç›®å½•å­˜åœ¨
mkdir -p build/packages

# æ„å»ºdebåŒ…
echo "æ„å»ºDEBåŒ…..."
dpkg-buildpackage -us -uc -b

# ç§»åŠ¨æ‰€æœ‰ç›¸å…³æ–‡ä»¶åˆ°buildç›®å½•
echo "ç§»åŠ¨åŒ…æ–‡ä»¶åˆ°buildç›®å½•..."
mv ../dlogcover_*.deb build/packages/ 2>/dev/null || true
mv ../dlogcover_*.ddeb build/packages/ 2>/dev/null || true
mv ../dlogcover_*.buildinfo build/packages/ 2>/dev/null || true
mv ../dlogcover_*.changes build/packages/ 2>/dev/null || true

echo "âœ… DEBåŒ…æ„å»ºå®Œæˆï¼"
echo "ğŸ“¦ åŒ…æ–‡ä»¶ä½ç½®: build/packages/"
ls -la build/packages/
```

#### æ–¹æ¡ˆ3ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡æ§åˆ¶è¾“å‡ºç›®å½•

è™½ç„¶`dpkg-buildpackage`æœ¬èº«ä¸æ”¯æŒç›´æ¥æŒ‡å®šè¾“å‡ºç›®å½•ï¼Œä½†å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

```bash
# è®¾ç½®ä¸´æ—¶å·¥ä½œç›®å½•
TEMP_BUILD_DIR=$(mktemp -d)
cp -r . "$TEMP_BUILD_DIR/"
cd "$TEMP_BUILD_DIR"

# æ„å»ºdebåŒ…
dpkg-buildpackage -us -uc -b

# ç§»åŠ¨åŒ…æ–‡ä»¶åˆ°åŸé¡¹ç›®çš„buildç›®å½•
mkdir -p "$ORIGINAL_DIR/build/packages"
mv ../dlogcover_*.deb "$ORIGINAL_DIR/build/packages/"
mv ../dlogcover_*.ddeb "$ORIGINAL_DIR/build/packages/" 2>/dev/null || true

# æ¸…ç†ä¸´æ—¶ç›®å½•
rm -rf "$TEMP_BUILD_DIR"
```

### æ¨èçš„å®ç°æ–¹æ¡ˆ

åŸºäºé¡¹ç›®çš„å½“å‰ç»“æ„å’ŒMemory Bankä¸­çš„è®°å½•ï¼Œæˆ‘æ¨èé‡‡ç”¨**æ–¹æ¡ˆ1**ï¼Œå³ä¿®æ”¹build.shè„šæœ¬ï¼Œå› ä¸ºï¼š

1. **ä¸€è‡´æ€§**ï¼šä¸ç°æœ‰çš„æ„å»ºæµç¨‹ä¿æŒä¸€è‡´
2. **ä¾¿åˆ©æ€§**ï¼šç”¨æˆ·åªéœ€è¦ä¸€ä¸ªè„šæœ¬å°±èƒ½å®Œæˆæ‰€æœ‰æ„å»ºä»»åŠ¡
3. **ç»´æŠ¤æ€§**ï¼šå‡å°‘è„šæœ¬æ–‡ä»¶æ•°é‡ï¼Œä¾¿äºç»´æŠ¤

### å…·ä½“å®ç°å»ºè®®

ä¿®æ”¹build.shè„šæœ¬ï¼Œæ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ–°å¢å‘½ä»¤è¡Œé€‰é¡¹**ï¼š
   - `-p, --package`: æ„å»ºdebåŒ…
   - `--package-dir=<dir>`: æŒ‡å®šåŒ…è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ä¸ºbuild/packagesï¼‰

2. **é›†æˆdebianåŒ…æ„å»º**ï¼š
   - åœ¨ç°æœ‰æ„å»ºæµç¨‹åæ·»åŠ debåŒ…æ„å»ºæ­¥éª¤
   - è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»æ£€æŸ¥
   - å°†ç”Ÿæˆçš„åŒ…æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•

3. **æ›´æ–°å¸®åŠ©ä¿¡æ¯**ï¼š
   - åœ¨show_helpå‡½æ•°ä¸­æ·»åŠ æ–°é€‰é¡¹è¯´æ˜
   - æä¾›ä½¿ç”¨ç¤ºä¾‹

è¿™æ ·ï¼Œç”¨æˆ·å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºdebåŒ…å¹¶å°†å…¶æ”¾ç½®åœ¨buildç›®å½•ä¸­ï¼š

```bash
# æ„å»ºå¹¶ç”ŸæˆdebåŒ…
./build.sh -r -p

# æˆ–è€…æŒ‡å®šè‡ªå®šä¹‰åŒ…ç›®å½•
./build.sh -r -p --package-dir=build/dist
```

è¿™ä¸ªè§£å†³æ–¹æ¡ˆæ—¢æ»¡è¶³äº†å°†debåŒ…æ”¾åˆ°buildç›®å½•çš„éœ€æ±‚ï¼Œåˆä¿æŒäº†é¡¹ç›®æ„å»ºæµç¨‹çš„ä¸€è‡´æ€§å’Œä¾¿åˆ©æ€§ã€‚

---

_**User**_

è¿›å…¥è®¡åˆ’æ¨¡å¼ï¼Œåˆ¶å®šåœ¨build.shæ·»åŠ -på‚æ•°æ”¯æŒè®¡åˆ’

---

_**Assistant**_

# Mode: PLAN

åŸºäºå¯¹debiané…ç½®çš„æ·±å…¥åˆ†æï¼Œæˆ‘å°†åˆ¶å®šåœ¨build.shä¸­æ·»åŠ -på‚æ•°æ”¯æŒçš„è¯¦ç»†è®¡åˆ’ã€‚

## å½“å‰çŠ¶å†µåˆ†æ

é€šè¿‡ç ”ç©¶å‘ç°ï¼š
- å½“å‰build.shè„šæœ¬æ”¯æŒå¤šç§æ„å»ºé€‰é¡¹ï¼ˆ-c, -d, -r, -t, -i, -fç­‰ï¼‰
- debianåŒ…æ„å»ºç›®å‰éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ`dpkg-buildpackage -us -uc -b`
- ç”Ÿæˆçš„debåŒ…é»˜è®¤æ”¾åœ¨é¡¹ç›®ä¸Šçº§ç›®å½•ï¼Œä¸ç¬¦åˆç”¨æˆ·å°†åŒ…æ”¾åˆ°buildç›®å½•çš„éœ€æ±‚
- é¡¹ç›®å·²æœ‰å®Œæ•´çš„debiané…ç½®æ–‡ä»¶ï¼ˆrules, control, installç­‰ï¼‰

## è®¡åˆ’ç›®æ ‡

åœ¨build.shè„šæœ¬ä¸­æ·»åŠ -p/--packageå‚æ•°ï¼Œå®ç°ï¼š
1. é›†æˆdebianåŒ…æ„å»ºåŠŸèƒ½
2. å°†ç”Ÿæˆçš„debåŒ…è‡ªåŠ¨ç§»åŠ¨åˆ°build/packagesç›®å½•
3. æä¾›æ¸…æ™°çš„æ„å»ºçŠ¶æ€åé¦ˆ
4. ä¿æŒä¸ç°æœ‰æ„å»ºæµç¨‹çš„ä¸€è‡´æ€§

## è¯¦ç»†å®ç°è®¡åˆ’

### 1. ä¿®æ”¹å‚æ•°è§£æéƒ¨åˆ†

**æ–‡ä»¶**: `build.sh`
**ä½ç½®**: å‚æ•°è§£æå¾ªç¯ï¼ˆçº¦ç¬¬170-200è¡Œï¼‰

**ä¿®æ”¹å†…å®¹**:
- åœ¨ç°æœ‰å‚æ•°è§£æcaseè¯­å¥ä¸­æ·»åŠ -p/--packageé€‰é¡¹
- æ·»åŠ BUILD_DEB_PACKAGEå˜é‡æ§åˆ¶
- æ·»åŠ PACKAGE_DIRå˜é‡æ”¯æŒè‡ªå®šä¹‰è¾“å‡ºç›®å½•

### 2. æ·»åŠ æ–°çš„å…¨å±€å˜é‡

**æ–‡ä»¶**: `build.sh`
**ä½ç½®**: é»˜è®¤å€¼è®¾ç½®éƒ¨åˆ†ï¼ˆçº¦ç¬¬160è¡Œé™„è¿‘ï¼‰

**ä¿®æ”¹å†…å®¹**:
- æ·»åŠ `BUILD_DEB_PACKAGE=0`
- æ·»åŠ `PACKAGE_DIR="build/packages"`

### 3. æ›´æ–°å¸®åŠ©ä¿¡æ¯

**æ–‡ä»¶**: `build.sh`
**ä½ç½®**: show_helpå‡½æ•°ï¼ˆçº¦ç¬¬8-22è¡Œï¼‰

**ä¿®æ”¹å†…å®¹**:
- åœ¨é€‰é¡¹åˆ—è¡¨ä¸­æ·»åŠ -p/--packageé€‰é¡¹è¯´æ˜
- æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

### 4. å®ç°debåŒ…æ„å»ºå‡½æ•°

**æ–‡ä»¶**: `build.sh`
**ä½ç½®**: åœ¨ç°æœ‰å‡½æ•°åæ·»åŠ æ–°å‡½æ•°

**ä¿®æ”¹å†…å®¹**:
- åˆ›å»º`build_deb_package()`å‡½æ•°
- å®ç°åŒ…æ„å»ºé€»è¾‘
- å®ç°æ–‡ä»¶ç§»åŠ¨é€»è¾‘
- æ·»åŠ é”™è¯¯å¤„ç†

### 5. é›†æˆåˆ°ä¸»æ„å»ºæµç¨‹

**æ–‡ä»¶**: `build.sh`
**ä½ç½®**: ä¸»æ„å»ºæµç¨‹æœ«å°¾ï¼ˆçº¦ç¬¬360-380è¡Œï¼‰

**ä¿®æ”¹å†…å®¹**:
- åœ¨å®‰è£…æ­¥éª¤åæ·»åŠ åŒ…æ„å»ºè°ƒç”¨
- ç¡®ä¿æ­£ç¡®çš„æ‰§è¡Œé¡ºåº

### 6. æ·»åŠ ä¾èµ–æ£€æŸ¥

**æ–‡ä»¶**: `build.sh`
**ä½ç½®**: ç¯å¢ƒæ£€æŸ¥éƒ¨åˆ†

**ä¿®æ”¹å†…å®¹**:
- æ·»åŠ debianåŒ…æ„å»ºå·¥å…·æ£€æŸ¥
- éªŒè¯å¿…è¦çš„debiané…ç½®æ–‡ä»¶å­˜åœ¨

## å…·ä½“å®ç°è§„æ ¼

### æ–°å¢å‘½ä»¤è¡Œé€‰é¡¹
```bash
-p, --package              æ„å»ºDEBåŒ…å¹¶æ”¾ç½®åˆ°build/packagesç›®å½•
--package-dir=<path>       æŒ‡å®šåŒ…è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤: build/packagesï¼‰
```

### æ–°å¢å‡½æ•°ç­¾å
```bash
build_deb_package()        # æ‰§è¡ŒdebåŒ…æ„å»ºçš„ä¸»å‡½æ•°
check_debian_tools()       # æ£€æŸ¥debianæ„å»ºå·¥å…·æ˜¯å¦å¯ç”¨
```

### æ–‡ä»¶ä¿®æ”¹ç‚¹
1. **ç¬¬8-22è¡Œ**: æ›´æ–°show_helpå‡½æ•°
2. **ç¬¬160è¡Œé™„è¿‘**: æ·»åŠ æ–°çš„é»˜è®¤å˜é‡
3. **ç¬¬170-200è¡Œ**: æ‰©å±•å‚æ•°è§£æé€»è¾‘
4. **ç¬¬240è¡Œé™„è¿‘**: æ·»åŠ check_debian_toolså‡½æ•°
5. **ç¬¬300è¡Œé™„è¿‘**: æ·»åŠ build_deb_packageå‡½æ•°
6. **ç¬¬360-380è¡Œ**: é›†æˆåˆ°ä¸»æ„å»ºæµç¨‹

### é”™è¯¯å¤„ç†ç­–ç•¥
- æ£€æŸ¥debianæ„å»ºå·¥å…·æ˜¯å¦å®‰è£…
- éªŒè¯debiané…ç½®æ–‡ä»¶å®Œæ•´æ€§
- ç¡®ä¿æ„å»ºç›®å½•å­˜åœ¨
- å¤„ç†æ–‡ä»¶ç§»åŠ¨è¿‡ç¨‹ä¸­çš„æƒé™é—®é¢˜

### è¾“å‡ºç›®å½•ç»“æ„
```
build/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ dlogcover_0.1.0_amd64.deb
â”‚   â”œâ”€â”€ dlogcover_0.1.0_amd64.ddeb (å¦‚æœå­˜åœ¨)
â”‚   â”œâ”€â”€ dlogcover_0.1.0_amd64.buildinfo
â”‚   â””â”€â”€ dlogcover_0.1.0_amd64.changes
```

## ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨
```bash
# æ„å»ºReleaseç‰ˆæœ¬å¹¶ç”ŸæˆdebåŒ…
./build.sh -r -p

# å®Œæ•´æµç¨‹ï¼šæ¸…ç†ã€æ„å»ºã€æµ‹è¯•ã€æ‰“åŒ…
./build.sh -f -p
```

### é«˜çº§ä½¿ç”¨
```bash
# æŒ‡å®šè‡ªå®šä¹‰åŒ…è¾“å‡ºç›®å½•
./build.sh -r -p --package-dir=dist/packages

# åªæ„å»ºåŒ…ï¼ˆå‡è®¾å·²ç»æ„å»ºè¿‡ï¼‰
./build.sh -p
```

## å…¼å®¹æ€§è€ƒè™‘

- ä¿æŒç°æœ‰æ‰€æœ‰å‚æ•°çš„åŠŸèƒ½ä¸å˜
- æ–°å‚æ•°ä¸ºå¯é€‰ï¼Œä¸å½±å“ç°æœ‰ç”¨æˆ·å·¥ä½œæµ
- é”™è¯¯å¤„ç†ç¡®ä¿åœ¨ç¼ºå°‘debianå·¥å…·æ—¶ç»™å‡ºæ¸…æ™°æç¤º
- æ”¯æŒä¸å…¶ä»–å‚æ•°ç»„åˆä½¿ç”¨

## éªŒè¯è®¡åˆ’

å®ç°åéœ€è¦éªŒè¯ï¼š
1. æ‰€æœ‰ç°æœ‰å‚æ•°ç»„åˆä»ç„¶æ­£å¸¸å·¥ä½œ
2. æ–°çš„-på‚æ•°èƒ½æ­£ç¡®æ„å»ºdebåŒ…
3. åŒ…æ–‡ä»¶è¢«æ­£ç¡®ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•
4. é”™è¯¯æƒ…å†µä¸‹ç»™å‡ºé€‚å½“çš„é”™è¯¯ä¿¡æ¯
5. å¸®åŠ©ä¿¡æ¯å‡†ç¡®åæ˜ æ–°åŠŸèƒ½

è¿™ä¸ªè®¡åˆ’å°†åœ¨ä¸ç ´åç°æœ‰åŠŸèƒ½çš„å‰æä¸‹ï¼Œä¸ºbuild.shè„šæœ¬æ·»åŠ å®Œæ•´çš„debianåŒ…æ„å»ºæ”¯æŒï¼Œæ»¡è¶³ç”¨æˆ·å°†debåŒ…æ”¾ç½®åœ¨buildç›®å½•çš„éœ€æ±‚ã€‚

---

_**User**_

è¿›å…¥æ‰§è¡Œæ¨¡å¼ï¼Œæ‰§è¡Œè®¡åˆ’

---

_**Assistant**_

# Mode: ACT

æˆ‘å°†å¼€å§‹æ‰§è¡Œè®¡åˆ’ï¼Œä¸ºbuild.shè„šæœ¬æ·»åŠ -på‚æ•°æ”¯æŒã€‚

---



---

ç°åœ¨å¼€å§‹æ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡ï¼š

---



---

Read file: build.sh

---

ç°åœ¨æˆ‘æ·»åŠ æ–°çš„å…¨å±€å˜é‡ï¼š

---



---



---

ç°åœ¨æ›´æ–°helpå‡½æ•°ï¼š

---

Read file: build.sh

---



---



---

ç°åœ¨æ‰©å±•å‚æ•°è§£æé€»è¾‘ï¼š

---

Read file: build.sh

---



---



---

ç°åœ¨æ·»åŠ debianå·¥å…·æ£€æŸ¥å‡½æ•°ï¼š

---

Read file: build.sh

---

æˆ‘å°†åœ¨clean_go_artifactså‡½æ•°åæ·»åŠ check_debian_toolså‡½æ•°ï¼š

---



---



---

ç°åœ¨å®ç°build_deb_packageå‡½æ•°ï¼š

---



---



---

ç°åœ¨å°†debåŒ…æ„å»ºé›†æˆåˆ°ä¸»æ„å»ºæµç¨‹ä¸­ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹ä¸»æ„å»ºæµç¨‹çš„æœ«å°¾éƒ¨åˆ†ï¼š

---

Read file: build.sh

---

ç°åœ¨æˆ‘éœ€è¦åœ¨å®‰è£…æ­¥éª¤åæ·»åŠ debåŒ…æ„å»ºè°ƒç”¨ï¼š

---



---



---

ç°åœ¨è®©æˆ‘éªŒè¯ä¿®æ”¹åçš„è„šæœ¬æ˜¯å¦æ­£ç¡®ã€‚è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹è„šæœ¬çš„è¯­æ³•ï¼š

---

```bash
bash -n build.sh
```

```
ut000520@wangbo:/data/workspace/git/dlogcover|devâš¡ â‡’  b
                                                       ba
                                                       bas
                                                       bash
                                                       bash -
                                                       bash -n
                                                       bash -n b
                                                       bash -n bu
                                                       bash -n bui
                                                       bash -n buil
                                                       bash -n build
                                                       bash -n build.
                                                       bash -n build.s
                                                       bash -n build.sh
                                                       bash -n build.sh
ut000520@wangbo:/data/workspace/git/dlogcover|devâš¡ â‡’
```

---

è¯­æ³•æ£€æŸ¥é€šè¿‡ï¼ç°åœ¨è®©æˆ‘æµ‹è¯•æ–°çš„å¸®åŠ©åŠŸèƒ½ï¼š

---

```bash
./build.sh --help
```

```
ut000520@wangbo:/data/workspace/git/dlogcover|devâš¡ â‡’  .
                                                       ./
                                                       ./b
                                                       ./bu
                                                       ./bui
                                                       ./buil
                                                       ./build
                                                       ./build.
                                                       ./build.s
                                                       ./build.sh
                                                       ./build.sh -
                                                       ./build.sh --
                                                       ./build.sh --h
                                                       ./build.sh --he
                                                       ./build.sh --hel
                                                       ./build.sh --help
                                                       ./build.sh --help
ç”¨æ³•: ./build.sh [é€‰é¡¹]
é€‰é¡¹:
  -h, --help                 æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -c, --clean                æ¸…ç†æ„å»ºç›®å½•
  -d, --debug                æ„å»ºDebugç‰ˆæœ¬(é»˜è®¤)
  -r, --release              æ„å»ºReleaseç‰ˆæœ¬
  -t, --test                 æ„å»ºå¹¶è¿è¡Œæµ‹è¯•
  -i, --install              å®‰è£…åˆ°ç³»ç»Ÿ
  -p, --package              æ„å»ºDEBåŒ…å¹¶æ”¾ç½®åˆ°build/packagesç›®å½•
  -f, --full-process         æ‰§è¡Œå®Œæ•´æµç¨‹ï¼šç¼–è¯‘ -> æµ‹è¯• -> è¦†ç›–ç‡ç»Ÿè®¡
  --prefix=<path>            å®‰è£…è·¯å¾„å‰ç¼€
  --package-dir=<path>       æŒ‡å®šåŒ…è¾“å‡ºç›®å½•(é»˜è®¤: build/packages)

ä½¿ç”¨ç¤ºä¾‹:
  ./build.sh -r -p                   æ„å»ºReleaseç‰ˆæœ¬å¹¶ç”ŸæˆDEBåŒ…
  ./build.sh -f -p                   æ‰§è¡Œå®Œæ•´æµç¨‹å¹¶ç”ŸæˆDEBåŒ…
  ./build.sh -p --package-dir=dist   ç”ŸæˆDEBåŒ…åˆ°distç›®å½•

ç¯å¢ƒè¦æ±‚:
  - Go 1.15+ (ç”¨äºGoè¯­è¨€åˆ†æå™¨)
  - CMake 3.10+
  - Clang/LLVMå¼€å‘åº“
  - nlohmann_jsonåº“
  - GoogleTeståº“
  - debhelper, dpkg-dev (ç”¨äºDEBåŒ…æ„å»º)
ut000520@wangbo:/data/workspace/git/dlogcover|devâš¡ â‡’
```

---

å®Œç¾ï¼å¸®åŠ©ä¿¡æ¯æ­£ç¡®æ˜¾ç¤ºäº†æ–°çš„-på‚æ•°å’Œç›¸å…³é€‰é¡¹ã€‚ç°åœ¨è®©æˆ‘æµ‹è¯•ä¸€ä¸‹debianå·¥å…·æ£€æŸ¥åŠŸèƒ½ï¼š

---

```bash
command -v dpkg-buildpackage
```

---



---

_**User**_

å°†æœ€æ–°ä¿®æ”¹çš„å†…å®¹æ›´æ–°åˆ°readme

---

_**Assistant**_

# Mode: ACT

æˆ‘å°†æ›´æ–°READMEæ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„-på‚æ•°æ”¯æŒçš„ç›¸å…³å†…å®¹ã€‚

---



---



---

é¦–å…ˆè®©æˆ‘æŸ¥çœ‹READMEæ–‡ä»¶çš„å½“å‰å†…å®¹ï¼Œç‰¹åˆ«æ˜¯æ„å»ºç›¸å…³çš„éƒ¨åˆ†ï¼š

---

Read file: README.md

---

ç»§ç»­æŸ¥çœ‹READMEçš„æ„å»ºç›¸å…³éƒ¨åˆ†ï¼š

---

<details>
            <summary>Searched codebase "READMEä¸­çš„æ„å»ºå‘½ä»¤å’Œbuild.shä½¿ç”¨è¯´æ˜" â€¢ **10** results</summary>
        
| File | Lines |
|------|-------|
| `README.md` | L366-420 |
| `README.md` | L235-326 |
| `README.md` | L37-91 |
| `README.md` | L190-235 |
| `README.md` | L1-37 |
| `README.md` | L326-366 |
| `README.md` | L496-519 |
| `README.md` | L420-496 |
| `README.md` | L147-190 |
| `README.md` | L91-147 |

</details>

---

ç°åœ¨è®©æˆ‘æŸ¥æ‰¾READMEä¸­å…³äºæ„å»ºå‘½ä»¤çš„å…·ä½“éƒ¨åˆ†ï¼š

---

Read file: README.md

---

ç°åœ¨æˆ‘éœ€è¦æ›´æ–°READMEä¸­çš„æ„å»ºå‘½ä»¤éƒ¨åˆ†ï¼Œæ·»åŠ æ–°çš„-på‚æ•°æ”¯æŒã€‚æˆ‘æ‰¾åˆ°äº†"å¸¸ç”¨æ„å»ºå‘½ä»¤"éƒ¨åˆ†ï¼Œéœ€è¦åœ¨è¿™é‡Œæ·»åŠ æ–°çš„åŒ…æ„å»ºé€‰é¡¹ï¼š

---



---



---

ç°åœ¨æˆ‘éœ€è¦æ›´æ–°"5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹"éƒ¨åˆ†ï¼Œæ·»åŠ åŒ…æ„å»ºçš„ç¤ºä¾‹ï¼š

---

Read file: README.md

---

ç°åœ¨æˆ‘éœ€è¦åœ¨"ä¸€é”®ä½“éªŒ"éƒ¨åˆ†æ·»åŠ åŒ…æ„å»ºçš„ç¤ºä¾‹ï¼š

---



---

ç°åœ¨æˆ‘éœ€è¦æ›´æ–°ç¯å¢ƒè¦æ±‚éƒ¨åˆ†ï¼Œæ·»åŠ debianæ„å»ºå·¥å…·çš„ä¾èµ–ï¼š

---



---

ç°åœ¨æ›´æ–°Ubuntu/Debiançš„ä¾èµ–å®‰è£…éƒ¨åˆ†ï¼Œæ·»åŠ debianæ„å»ºå·¥å…·ï¼š

---



---



---

å®Œç¾ï¼æˆ‘å·²ç»æˆåŠŸæ›´æ–°äº†READMEæ–‡ä»¶ï¼Œæ·»åŠ äº†æ‰€æœ‰ä¸æ–°çš„-på‚æ•°ç›¸å…³çš„å†…å®¹ã€‚è®©æˆ‘æ€»ç»“ä¸€ä¸‹æ‰€åšçš„æ›´æ–°ï¼š

## READMEæ›´æ–°æ€»ç»“

### âœ… å·²å®Œæˆçš„æ›´æ–°

1. **å¿«é€Ÿå¼€å§‹éƒ¨åˆ†**ï¼š
   - æ·»åŠ äº†"ğŸ“¦ å¿«é€Ÿç”ŸæˆDEBå®‰è£…åŒ…"éƒ¨åˆ†
   - æä¾›äº†å®Œæ•´çš„åŒ…æ„å»ºã€æŸ¥çœ‹ã€å®‰è£…å’ŒéªŒè¯æµç¨‹

2. **å¸¸ç”¨æ„å»ºå‘½ä»¤éƒ¨åˆ†**ï¼š
   - æ·»åŠ äº†`--package`å‚æ•°çš„ä½¿ç”¨ç¤ºä¾‹
   - æ·»åŠ äº†`--release --package`ç»„åˆä½¿ç”¨ç¤ºä¾‹  
   - æ·»åŠ äº†`--full-process --package`å®Œæ•´æµç¨‹ç¤ºä¾‹
   - æ–°å¢äº†"build.sh è„šæœ¬å‚æ•°è¯¦è§£"è¡¨æ ¼ï¼Œè¯¦ç»†è¯´æ˜æ‰€æœ‰å‚æ•°

3. **ç¯å¢ƒè¦æ±‚éƒ¨åˆ†**ï¼š
   - åœ¨ç¯å¢ƒè¦æ±‚æ‘˜è¦è¡¨æ ¼ä¸­æ·»åŠ äº†æ‰“åŒ…å·¥å…·ä¾èµ–ï¼ˆdebhelper, dpkg-devï¼‰
   - åœ¨Ubuntu/Debianä¾èµ–å®‰è£…éƒ¨åˆ†æ·»åŠ äº†DEBåŒ…æ„å»ºå·¥å…·çš„å®‰è£…å‘½ä»¤

### ğŸ“‹ æ›´æ–°çš„å…·ä½“å†…å®¹

**æ–°å¢çš„æ„å»ºå‘½ä»¤ç¤ºä¾‹**ï¼š
```bash
# æ„å»ºDEBåŒ…
./build.sh --package

# æ„å»ºReleaseç‰ˆæœ¬å¹¶ç”ŸæˆDEBåŒ…  
./build.sh --release --package

# æ‰§è¡Œå®Œæ•´æµç¨‹å¹¶ç”ŸæˆDEBåŒ…
./build.sh --full-process --package

# è‡ªå®šä¹‰åŒ…è¾“å‡ºç›®å½•
./build.sh -p --package-dir=dist
```

**æ–°å¢çš„å‚æ•°è¯´æ˜è¡¨æ ¼**ï¼š
- è¯¦ç»†åˆ—å‡ºäº†æ‰€æœ‰build.shæ”¯æŒçš„å‚æ•°
- ç‰¹åˆ«çªå‡ºäº†æ–°çš„`--package`å’Œ`--package-dir`å‚æ•°
- æä¾›äº†æ¯ä¸ªå‚æ•°çš„ä½¿ç”¨ç¤ºä¾‹

**ç¯å¢ƒä¾èµ–æ›´æ–°**ï¼š
- æ·»åŠ äº†debhelperå’Œdpkg-devä½œä¸ºå¯é€‰çš„æ‰“åŒ…å·¥å…·ä¾èµ–
- åœ¨Ubuntu/Debianå®‰è£…æŒ‡å—ä¸­æ·»åŠ äº†æ„å»ºå·¥å…·çš„å®‰è£…å‘½ä»¤

è¿™äº›æ›´æ–°ç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿï¼š
1. å¿«é€Ÿäº†è§£å¦‚ä½•ä½¿ç”¨æ–°çš„åŒ…æ„å»ºåŠŸèƒ½
2. ç†è§£æ‰€æœ‰å¯ç”¨çš„æ„å»ºé€‰é¡¹å’Œå‚æ•°ç»„åˆ
3. æ­£ç¡®å®‰è£…å¿…è¦çš„ä¾èµ–å·¥å…·
4. æŒ‰ç…§æ–‡æ¡£æˆåŠŸæ„å»ºå’Œå®‰è£…DEBåŒ…

æ‰€æœ‰çš„æ›´æ–°éƒ½ä¿æŒäº†ä¸ç°æœ‰æ–‡æ¡£é£æ ¼çš„ä¸€è‡´æ€§ï¼Œå¹¶ä¸”æä¾›äº†æ¸…æ™°çš„ä½¿ç”¨æŒ‡å¯¼å’Œç¤ºä¾‹ã€‚

---

